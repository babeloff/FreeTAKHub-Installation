---
- name: Template config file
  template:
    src: webMAP_config.json.j2
    dest: "{{ webmap_config_location }}"
    owner: root
    group: root
    mode: 0664

- name: Template unit file
  become: true
  become_user: root
  template:
    src: webmap.service.j2
    dest: "{{ unit_files_location }}/{{ webmap_service_name }}.service"
    owner: root
    group: root
    mode: 0664

- name: Kill any currently running processes
  include_tasks: ../../common/tasks/kill.yml
  vars:
    process: "/opt/FTH-webmap-linux"

- name: "Activate FTS WebMap service"
  become: true
  become_user: root
  ansible.builtin.systemd_service:
    name: "{{ webmap_service_name }}"
    enabled: "{{ webmap_enabled }}"
    state: "{{ webmap_state }}"
  register: activate_fts_service
  retries: 20
  until: activate_fts_service is succeeded
...
